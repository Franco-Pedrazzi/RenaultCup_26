{% extends "./base.html" %}
{% block body %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../static/css/cantina.css">

</head>
<body>
    <div class="form-cantina-container">
    {% if current_user.rango in ["admin","cantina"] %}
    <form method="POST" action="/cantina/agregar" enctype="multipart/form-data" class="form-cantina">
        <h2>Agregar producto</h2>
        <input type="text" name="nombre" placeholder="Nombre" required>
        <input type="number" name="precio" placeholder="Precio" required>
        <input type="file" name="archivo" required>
        <button type="submit">Agregar</button>
    </form>
    {% endif %}
</div>

    {% set nro = namespace(value=0) %}
    <h1>Cantina</h1>
    <div id="carouselExample" class="carousel slide">
        <div class="carousel-inner">
            {% for i in range(0,Len,5) %}
            {% if 0==i %}
            <div class="carousel-item active">
                <div class="grupo-carta-cantina">
                    {% for j in range(0,5) %}
                    {% if Len>j %}
                    <div class="carta-cantina">
                        <img src="data:{{ products[j].tipo_img }};base64,{{  products[j].pixel_img }}"
                            class="imagen-cantina" alt="..." style="height: 250px; object-fit: cover;">
                        <div class="contenido-carta-cantina">
                            <h5 class="titulo-cantina">{{products[j].nombre}}</h5>
                            <p class="texto-cantina">{{products[j].precio}}$</p>
                            {% if current_user.rango in ["admin","cantina"] %}
                            <a href="/updatepage/Producto/{{products[j].id}}">editar</a>
                            <a href="/api/product/delete/{{products[j].id}}">eliminar</a>
                            {% endif %}
                        </div>

                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>

            {% else %}
            <div class="carousel-item">
                <div class="grupo-carta-cantina">
                    {% for j in range(i,i+5) %}
                    {% if Len>j %}


                    <div class="carta-cantina">
                        <img src="data:{{ products[j].tipo_img }};base64,{{  products[j].pixel_img }}"
                            class="imagen-cantina" alt="..." style="height: 250px; object-fit: cover;">
                        <div class="contenido-carta-cantina">
                            <h5 class="titulo-cantina">{{products[j].nombre}}</h5>
                            <p class="texto-cantina">{{products[j].precio}}$</p>
                        </div>

                    </div>

                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            {% endfor %}
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Anterior</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Siguiente</span>
            </button>
        </div>

        <!-- Bootstrap JS (con Popper incluido) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

{% endblock %}